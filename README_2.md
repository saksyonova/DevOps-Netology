# ДЗ по теме "6.6. Troubleshooting" :tropical_fish:


## задача 1

сначала определим текующую операцию командой:
```
db.currentOp()
```

завершим операцию по opid:
```
db.killOp()
```

во избежание долгих запросов можно создать новый или перестроить существующий индекс. также можно использовать метод maxTimeMS(), который установит предел исполнения по времени.
  
  
## задача 2

проблема такого поведения Redis, скорее всего, в исчерпании ресурсов оперативной памяти.
вся память занята истёкшими, но ещё не удалёнными ключами. Redis - однопоточное приложение, все операции в нём блокируется, пока не выполнить очистку.
  
  
## задача 3

ошибки такого вида возникают из-за роста нагрузки. решением может стать добавление ресурсов на машине, увеличение значений параметров connect_timeout, interactive_timeout, wait_timeout и создание индексов для оптимизации и ускорения (определить можно по плану запросов).
  
ещё соединение может отвалиться из-за сбоя в сетевой инфраструктуре. можно попробовать увеличить значение параметра net_read_timeout.
  
  
## задача 4

ошибка с oom (out-of-memory) возникает также из-за нехватки ресурсов оперативной памяти, из-за чего ОС просто завершает пожирающие память процессы, чтобы "выжить". чтобы такого не возникало, можно попробовать увеличить объём ОЗУ или установить ограничение в настройках PG на использование ресурсов хоста, чтобы не использовались абсолютно все ресурсы.